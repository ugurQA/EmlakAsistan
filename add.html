<!DOCTYPE html>
<html>
<head>
  <title>Yeni İlan Ekle</title>
  <link rel="stylesheet" href="styles.css">
  <meta charset="UTF-8"> <!-- Ensures proper handling of Turkish characters -->
</head>

<body>
  <h1>Yeni İlan Ekle</h1>
  <form id="listingForm" onsubmit="addListing(); return false;">
    <div class="form-group">
      <span>• İlan Başlığı:</span>
      <input type="text" id="title" placeholder="İlan Başlığı" required>
    </div>
    <div class="form-group">
      <span>• Tür:</span>
      <select id="type" required>
        <option value="----">----</option>
        <option value="Satılık">Satılık</option>
        <option value="Kiralık">Kiralık</option>
      </select>
    </div>
    <div class="form-group">
      <span>• Kategori:</span>
      <select id="category" required>
        <option value="----">----</option>
        <option value="Konut">Konut</option>
        <option value="Arsa">Arsa</option>
      </select>
    </div>
    <div id="commonFields">
      <div class="form-group">
        <span>• Adres:</span>
        <input type="text" id="address" placeholder="Adres" required>
      </div>
      <div class="form-group">
        <span>• İl:</span>
        <select id="province" required>
          <option value="----">----</option>
          <option value="İzmir">İzmir</option>
          <option value="Aydın">Aydın</option>
          <option value="Manisa">Manisa</option>
          <option value="Ankara">Ankara</option>
        </select>
      </div>
      <div class="form-group">
        <span>• İlçe:</span>
        <select id="district" required>
          <option value="----">----</option>
        </select>
      </div>
      <div class="form-group">
        <span>• Fiyat:</span>
        <input type="number" id="price" placeholder="Fiyat" required>
      </div>
      <div class="form-group">
        <span>• İletişim Numarası:</span>
        <input type="tel" id="contact" placeholder="İletişim Numarası" required>
      </div>
    </div>
    <div id="propertyDetails" style="display: none;">
      <div class="form-group">
        <span>• Metrekare:</span>
        <input type="number" id="squareMeters" placeholder="Metrekare" required>
      </div>
      <div id="konutDetails" style="display: none;">
        <div class="form-group">
          <span>• Oda Sayısı:</span>
          <select id="roomType"></select>
        </div>
        <div class="form-group">
          <span>• Bulunduğu Kat:</span>
          <select id="floor"></select>
        </div>
        <div class="form-group">
          <span>• Kat Sayısı:</span>
          <select id="totalFloors"></select>
        </div>
        <div class="form-group">
          <span>• Isınma:</span>
          <select id="heating"></select>
        </div>
        <div class="form-group">
          <span>• Otopark:</span>
          <select id="parking"></select>
        </div>
        <div class="form-group">
          <span>• Site İçerisinde:</span>
          <select id="site"></select>
        </div>
        <div class="form-group">
          <span>• Açıklama:</span>
          <textarea id="description" placeholder="Açıklama" maxlength="3000"></textarea>
        </div>
        <div class="form-group">
          <span>• Not:</span>
          <textarea id="notes" placeholder="Not" maxlength="3000"></textarea>
        </div>
      </div>
      <div id="arsaDetails" style="display: none;">
        <div class="form-group">
          <span>• İmar Durumu:</span>
          <select id="developmentStatus"></select>
        </div>
      </div>
    </div>
    <div class="form-group">
      <span>• Fotoğraflar:</span>
      <input type="file" id="photos" multiple accept="image/*">
      <div id="photoPreview"></div>
    </div>
    <input type="hidden" id="listingId">
    <div class="form-group">
      <button type="submit">Kaydet</button>
    </div>
  </form>

  <script type="module">
    import { createRoomTypeDropdown, createHeatingDropdown, createParkingDropdown, createSiteDropdown, createDevelopmentStatusDropdown, createFloorDropdown, createTotalFloorsDropdown } from './components.js';
    import './app.js'; // Import app.js to initialize event listeners

    document.addEventListener("DOMContentLoaded", () => {
      // Initialize dropdowns using components.js
      const roomTypeSelect = document.getElementById("roomType");
      const heatingSelect = document.getElementById("heating");
      const parkingSelect = document.getElementById("parking");
      const siteSelect = document.getElementById("site");
      const developmentStatusSelect = document.getElementById("developmentStatus");
      const floorSelect = document.getElementById("floor");
      const totalFloorsSelect = document.getElementById("totalFloors");

      if (roomTypeSelect) {
        const dropdown = createRoomTypeDropdown();
        roomTypeSelect.replaceWith(dropdown);
        dropdown.id = "roomType";
        dropdown.name = "roomType";
      }
      if (heatingSelect) {
        const dropdown = createHeatingDropdown();
        heatingSelect.replaceWith(dropdown);
        dropdown.id = "heating";
        dropdown.name = "heating";
      }
      if (parkingSelect) {
        const dropdown = createParkingDropdown();
        parkingSelect.replaceWith(dropdown);
        dropdown.id = "parking";
        dropdown.name = "parking";
      }
      if (siteSelect) {
        const dropdown = createSiteDropdown();
        siteSelect.replaceWith(dropdown);
        dropdown.id = "site";
        dropdown.name = "site";
      }
      if (developmentStatusSelect) {
        const dropdown = createDevelopmentStatusDropdown();
        developmentStatusSelect.replaceWith(dropdown);
        dropdown.id = "developmentStatus";
        dropdown.name = "developmentStatus";
      }
      if (floorSelect) {
        const dropdown = createFloorDropdown();
        floorSelect.replaceWith(dropdown);
        dropdown.id = "floor";
        dropdown.name = "floor";
      }
      if (totalFloorsSelect) {
        const dropdown = createTotalFloorsDropdown();
        totalFloorsSelect.replaceWith(dropdown);
        dropdown.id = "totalFloors";
        dropdown.name = "totalFloors";
      }
    });
  </script>
</body>
</html>